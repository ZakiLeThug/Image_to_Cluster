<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>From Image to Cluster ‚úÖ</title>
  <style>
    :root { --bg:#0b1020; --fg:#eaf0ff; --muted:#9bb0ff; --card:rgba(255,255,255,.06); --stroke:rgba(255,255,255,.12); }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial;
      background: radial-gradient(1200px 600px at 20% 0%, #18265a 0%, transparent 60%),
                  radial-gradient(900px 500px at 90% 10%, #3b1a5a 0%, transparent 55%),
                  var(--bg);
      color: var(--fg);
      min-height: 100vh;
      display: grid;
      place-items: center;
      padding: 28px;
    }

    .wrap { width: min(980px, 100%); display: grid; gap: 16px; }
    .top {
      display: grid;
      gap: 10px;
      padding: 18px 18px 14px;
      border: 1px solid var(--stroke);
      background: var(--card);
      border-radius: 18px;
      backdrop-filter: blur(10px);
    }
    h1 { margin: 0; font-size: clamp(22px, 3vw, 30px); letter-spacing: .2px; }
    .sub { margin: 0; color: rgba(234,240,255,.8); line-height: 1.4; }

    .badges { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 4px; }
    .badge {
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--stroke);
      background: rgba(0,0,0,.25);
      color: rgba(234,240,255,.9);
      font-size: 13px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      user-select: none;
    }
    .dot { width: 10px; height: 10px; border-radius: 50%; background: #2ef2a5; box-shadow: 0 0 14px rgba(46,242,165,.6); }

    .grid { display: grid; grid-template-columns: 1.15fr .85fr; gap: 16px; }
    @media (max-width: 860px) { .grid { grid-template-columns: 1fr; } }

    .scene, .panel {
      border: 1px solid var(--stroke);
      background: var(--card);
      border-radius: 18px;
      padding: 16px;
      backdrop-filter: blur(10px);
    }

    /* "Dessin" CSS : une petite ville + pipeline */
    .canvas {
      height: 340px;
      border-radius: 14px;
      border: 1px solid var(--stroke);
      background:
        linear-gradient(180deg, rgba(255,255,255,.09), transparent 40%),
        radial-gradient(240px 140px at 20% 30%, rgba(46,242,165,.18), transparent 65%),
        radial-gradient(220px 140px at 80% 22%, rgba(155,176,255,.20), transparent 60%),
        rgba(0,0,0,.22);
      position: relative;
      overflow: hidden;
    }

    .cloud {
      position: absolute; top: 26px; left: 26px;
      width: 170px; height: 56px;
      background: rgba(255,255,255,.12);
      border: 1px solid var(--stroke);
      border-radius: 999px;
      filter: drop-shadow(0 8px 18px rgba(0,0,0,.35));
    }
    .cloud:before, .cloud:after {
      content: "";
      position: absolute;
      background: rgba(255,255,255,.12);
      border: 1px solid var(--stroke);
      border-radius: 999px;
    }
    .cloud:before { width: 70px; height: 70px; left: 22px; top: -26px; }
    .cloud:after  { width: 90px; height: 90px; left: 70px; top: -38px; }

    .pipeline {
      position: absolute; left: 26px; right: 26px; top: 120px;
      display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px;
      align-items: center;
    }
    .step {
      border: 1px solid var(--stroke);
      background: rgba(0,0,0,.25);
      border-radius: 14px;
      padding: 12px 10px;
      position: relative;
      min-height: 70px;
    }
    .step strong { display:block; font-size: 14px; margin-bottom: 4px; }
    .step span { color: rgba(234,240,255,.75); font-size: 12px; line-height: 1.25; display:block; }

    .arrow {
      position: absolute; right: -10px; top: 50%;
      width: 20px; height: 2px; background: rgba(234,240,255,.5);
    }
    .arrow:after {
      content:"";
      position:absolute; right:-3px; top:-4px;
      border-left: 7px solid rgba(234,240,255,.7);
      border-top: 5px solid transparent;
      border-bottom: 5px solid transparent;
    }
    .step:last-child .arrow { display:none; }

    .city {
      position: absolute; left: 0; right: 0; bottom: 0;
      height: 120px;
      background: linear-gradient(180deg, transparent, rgba(0,0,0,.35));
    }
    .building {
      position: absolute; bottom: 18px;
      width: 86px; height: 86px;
      border-radius: 14px 14px 10px 10px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.10);
    }
    .building:before {
      content:"";
      position:absolute; inset: 14px;
      border-radius: 10px;
      background:
        repeating-linear-gradient(90deg, rgba(46,242,165,.55) 0 10px, transparent 10px 18px),
        repeating-linear-gradient(0deg, rgba(155,176,255,.35) 0 10px, transparent 10px 18px);
      opacity: .55;
    }
    .b1 { left: 60px; }
    .b2 { left: 170px; height: 98px; width: 96px; }
    .b3 { right: 70px; width: 110px; height: 88px; }

    .flag {
      position: absolute; left: 10px; top: -20px;
      width: 10px; height: 40px;
      background: rgba(234,240,255,.45);
      border-radius: 6px;
    }
    .flag:after {
      content:"";
      position:absolute; left: 8px; top: 4px;
      width: 40px; height: 18px;
      background: rgba(46,242,165,.35);
      border: 1px solid var(--stroke);
      border-radius: 8px;
    }

    .panel h2 { margin: 0 0 10px; font-size: 18px; }
    .panel code {
      display: block;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--stroke);
      background: rgba(0,0,0,.25);
      color: rgba(234,240,255,.92);
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12.5px;
      overflow-x: auto;
      margin: 0 0 10px;
    }
    .mini { color: rgba(234,240,255,.72); font-size: 13px; line-height: 1.4; margin: 0; }
    .hr { height: 1px; background: var(--stroke); margin: 12px 0; }
    .ok { color: #2ef2a5; font-weight: 650; }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <h1>‚úÖ From Image to Cluster</h1>
      <p class="sub">
        Cette page prouve que l‚Äôimage <span class="ok">nginx-custom</span> a bien √©t√© build√©e (Packer) puis d√©ploy√©e sur Kubernetes (k3d) via Ansible.
      </p>

      <div class="badges">
        <div class="badge"><span class="dot"></span> Pod Running</div>
        <div class="badge">Image: <b>nginx-custom:1.0</b></div>
        <div class="badge">Port: <b>8081</b></div>
        <div class="badge">Time: <b id="now">--:--:--</b></div>
      </div>
    </div>

    <div class="grid">
      <div class="scene">
        <div class="canvas">
          <div class="cloud"></div>

          <div class="pipeline">
            <div class="step">
              <strong>1) Packer</strong>
              <span>Build image Nginx</span>
              <div class="arrow"></div>
            </div>
            <div class="step">
              <strong>2) Docker</strong>
              <span>Artefact versionn√©</span>
              <div class="arrow"></div>
            </div>
            <div class="step">
              <strong>3) k3d / K8s</strong>
              <span>Cluster l√©ger</span>
              <div class="arrow"></div>
            </div>
            <div class="step">
              <strong>4) Ansible</strong>
              <span>D√©ploiement auto</span>
            </div>
          </div>

          <div class="city">
            <div class="building b1"><div class="flag"></div></div>
            <div class="building b2"></div>
            <div class="building b3"></div>
          </div>
        </div>
      </div>

      <div class="panel">
        <h2>üìã Quick checks</h2>
        <code>kubectl get pods,svc -o wide</code>
        <code>kubectl logs -l app=nginx-custom --tail=50</code>
        <div class="hr"></div>
        <p class="mini">
          Si tu vois cette page apr√®s <b>make all</b>, alors :
          <br/>‚úÖ l‚Äôimage a √©t√© import√©e dans k3d
          <br/>‚úÖ le Deployment a cr√©√© un pod
          <br/>‚úÖ le Service est expos√© et le port-forward fonctionne
        </p>
      </div>
    </div>
  </div>

  <script>
    const el = document.getElementById("now");
    const tick = () => el.textContent = new Date().toLocaleTimeString("fr-FR");
    tick(); setInterval(tick, 1000);
  </script>
</body>
</html>
